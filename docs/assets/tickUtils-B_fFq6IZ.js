import{u as H,b as N,p as V}from"./frameContext-DwsuiCxB.js";const ae=({layer:s="BOTTOM",scaleId:n,tickStyle:e,labelStyle:a,labelGap:r,tickSize:i,ticks:d})=>(H(s,({ctx:o,valToPos:b,getScale:c,frame:T})=>{const u=c(n);if(!u||!u.axis||u.origin!=="x")return;const t=u.axis,l=t.position==="top"?t.canvasRect.y+t.canvasRect.height:t.canvasRect.y,m=window.devicePixelRatio||1,g=l,y=(i??6)*m,p=t.position==="top"?l-y:l+y,h=(r??12)*m;o.save(),o.fontKerning="auto",N(o,{...e}),o.beginPath();const M=Array.isArray(d)?d:d({...u,axis:t},T);for(const{value:C}of M){const v=b(C,n,"canvas");o.moveTo(v,g),o.lineTo(v,p)}o.stroke(),o.restore(),o.save(),N(o,{textBaseline:t.position==="top"?"bottom":"top",textAlign:"center",...e,...a});for(const{value:C,label:v}of M){const f=b(C,n,"canvas"),U=v.split(`
`);for(let A=0;A<U.length;A++)o.fillText(U[A],f,p+m*2+A*h)}o.restore()},[d,n,e,a]),null),ie=({layer:s="BOTTOM",scaleId:n,tickStyle:e,labelStyle:a,labelGap:r,tickSize:i,ticks:d})=>(H(s,({ctx:o,valToPos:b,getScale:c,frame:T})=>{const u=c(n);if(!u||!u.axis||u.origin!=="y")return;const t=u.axis,l=t.position==="left"?t.canvasRect.x+t.canvasRect.width:t.canvasRect.x,m=l,g=i??6,y=t.position==="left"?l-g:l+g,p=r??12,h=Array.isArray(d)?d:d({...u,axis:t},T);o.save(),o.fontKerning="auto",N(o,{...e}),o.beginPath();for(const{value:M}of h){const C=b(M,n,"canvas");o.moveTo(m,C),o.lineTo(y,C)}o.stroke(),o.restore(),o.save(),N(o,{textBaseline:"middle",textAlign:t.position==="left"?"right":"left",...e,...a});for(const{value:M,label:C}of h){const v=b(M,n,"canvas"),f=C.split(`
`);for(let U=0;U<f.length;U++)o.fillText(` ${f[U]} `,y,v+U*p)}o.restore()},[d,n,e,a]),null),$=60,X=30,z="UTC",Y="en-GB",ce=({space:s,formatter:n,acceptableIncrements:e}={})=>(a,r)=>{const{min:i,max:d}=a,o=[],b=window.devicePixelRatio||1,c=(s??(a.origin==="x"?$:X))*b,T=V(r,c,a.id),u=e??E,t=u.find(m=>m>T)??u.at(-1)??1;let l=i;if(Math.abs(l%t)>Number.EPSILON){const m=(t-l%t)%t;l+=m}for(;l<=d&&o.length<1e3;)o.push(l),l+=t;return(n??G)(o)},G=s=>{const n=Math.max(0,Math.ceil(-Math.log10(s[1]-s[0])));return s.map(e=>({value:e,label:e.toFixed(n)}))},E=[];for(let s=-12;s<=12;s++)E.push(1*10**s),E.push(2*10**s),E.push(5*10**s);const K=1,I=1e3*K,R=60*I,P=60*R,_=24*P,Z=30*_,x=365*_,q=[[1,"milliseconds"],[2,"milliseconds"],[5,"milliseconds"],[10,"milliseconds"],[20,"milliseconds"],[50,"milliseconds"],[100,"milliseconds"],[200,"milliseconds"],[500,"milliseconds"],[1,"seconds"],[5,"seconds"],[10,"seconds"],[15,"seconds"],[30,"seconds"],[1,"minutes"],[5,"minutes"],[10,"minutes"],[15,"minutes"],[30,"minutes"],[1,"hours"],[2,"hours"],[3,"hours"],[4,"hours"],[6,"hours"],[8,"hours"],[12,"hours"],[1,"days"],[3,"days"],[5,"days"],[7,"days"],[10,"days"],[15,"days"],[1,"months"],[2,"months"],[3,"months"],[4,"months"],[6,"months"],[1,"years"],[2,"years"],[5,"years"],[10,"years"],[25,"years"],[50,"years"],[100,"years"]],k=s=>{const[n,e]=s;switch(e){case"milliseconds":return n;case"seconds":return n*I;case"minutes":return n*R;case"hours":return n*P;case"days":return n*_;case"months":return n*Z;case"years":return n*x}},J=(s,n)=>{const e=new Date(s);return e.setUTCMilliseconds(e.getUTCMilliseconds()+n),e.getTime()},Q=(s,n)=>{const e=new Date(s);return e.setUTCSeconds(e.getUTCSeconds()+n),e.getTime()},W=(s,n)=>{const e=new Date(s);return e.setUTCMinutes(e.getUTCMinutes()+n),e.getTime()},ee=(s,n)=>{const e=new Date(s);return e.setUTCHours(e.getUTCHours()+n),e.getTime()},se=(s,n)=>{const e=new Date(s);return e.setUTCDate(e.getUTCDate()+n),e.getTime()},B=(s,n)=>{const e=new Date(s);return e.setUTCMonth(e.getUTCMonth()+n),e.getTime()},D=(s,n)=>{const[e,a]=n;switch(a){case"milliseconds":return J(s,e);case"seconds":return Q(s,e);case"minutes":return W(s,e);case"hours":return ee(s,e);case"days":return se(s,e);case"months":return B(s,e);case"years":return B(s,e*12)}};function L(s,n){const e=new Date(s),a=new Date(e.toLocaleString("en-US",{timeZone:n})),r=new Date(e.toLocaleString("en-US",{timeZone:"UTC"}));return(a.getTime()-r.getTime())/(3600*1e3)}const ne=(s,n,e="UTC")=>{const[a,r]=n;let i=new Date(s);const d=()=>{i.setUTCHours(-L(i,e),0,0,0)};switch(r){case"milliseconds":i.setUTCMilliseconds(Math.ceil(i.getUTCMilliseconds()/a)*a);break;case"seconds":i.setUTCSeconds(Math.ceil(i.getUTCSeconds()/a)*a,0);break;case"minutes":i.setUTCMinutes(Math.ceil(i.getTime()%P/R/a)*a,0,0);break;case"hours":i.setUTCHours(Math.ceil(i.getTime()%_/P/a)*a,0,0,0);break;case"days":case"months":case"years":r==="months"?i.setUTCDate(1):r==="years"&&i.setUTCMonth(0,1),d(),i.getTime()<s&&(i=new Date(D(i,[1,r])));break}return i.getTime()},le=({timeZone:s=z,space:n=$,formatter:e,locale:a,showTimezone:r}={})=>(i,d)=>{const{min:o,max:b}=i,c=Math.floor(d.chartAreaCanvasPX.width/n)+1,u=(b-o)/c,[t,l]=q.find(h=>k(h)>=u)??[1,"milliseconds"],m=ne(o,[t,l],s),g=L(m,s),y=[m];let p;for(;;){switch(l){case"milliseconds":case"seconds":case"minutes":case"hours":{p=D(m,[y.length*t,l]);break}case"days":{const h=D(m,[y.length*t,l]);p=D(h,[g-L(h,s),"hours"]);break}case"months":case"years":{const h=D(D(D(m,[g,"hours"]),[y.length*t,l]),[-g,"hours"]);p=D(h,[g-L(h,s),"hours"]);break}}if(p>b)break;y.push(p)}return(e??te({locale:a,showTimezone:r,timeZone:s}))(y)},w=(s,n,e)=>s.find(a=>a.type===e)?.value!==n.find(a=>a.type===e)?.value,te=({timeZone:s=z,locale:n=Y,showTimezone:e=!0})=>{const a=new Intl.DateTimeFormat(n,{year:"numeric",day:"numeric",month:"short",hour:"numeric",hourCycle:"h23",minute:"numeric",second:"numeric",fractionalSecondDigits:3,timeZoneName:"short",timeZone:s});return r=>{const i=r[1]-r[0],d=i<k([1,"days"]),o=i<k([1,"minutes"]),b=i<k([1,"seconds"]);return r.map(c=>({value:c,label:a.formatToParts(new Date(c))})).map((c,T,u)=>{const t=u[T-1],l=T===0||w(c.label,t.label,"year"),m=T===0||w(c.label,t.label,"day"),g=T===0||w(c.label,t.label,"month"),y=T===0||w(c.label,t.label,"hour"),p=T===0||w(c.label,t.label,"timeZoneName"),h=T===0||w(c.label,t.label,"minute"),M=T===0||w(c.label,t.label,"second"),C=T===0||w(c.label,t.label,"fractionalSecond"),v=[];if(d&&(y||h||p||M||C)){const f=c.label.find(S=>S.type==="hour")?.value,U=c.label.find(S=>S.type==="minute")?.value,A=c.label.find(S=>S.type==="timeZoneName")?.value;let O="";if(o){const S=c.label.find(F=>F.type==="second")?.value,j=c.label.find(F=>F.type==="fractionalSecond")?.value;O=`:${S}`+(b?`.${j}`:"")}v.push(`${f}:${U}${O}`+(e&&p?` ${A}`:""))}return(m||g)&&v.push([c.label.find(f=>f.type==="month")?.value,m&&c.label.find(f=>f.type==="day")?.value].filter(Boolean).join(" ")),l&&v.push(c.label.find(f=>f.type==="year")?.value),{value:c.value,label:v.filter(f=>f).join(`
`)}})}};export{ae as X,ie as Y,le as a,ce as m};
