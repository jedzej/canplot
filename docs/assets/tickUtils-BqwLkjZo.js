import{u as B,b as N,p as j}from"./CanPlot-Dt-Hk-bz.js";const ae=({layer:s="BOTTOM",scaleId:t,tickStyle:e,labelStyle:a,labelGap:u,tickSize:i,ticks:m})=>(B(s,({getCtx:p,valToPos:b,getScale:l,getFrame:d})=>{const n=p(),o=l(t);if(!o||!o.axis||o.origin!=="x")return;const c=o.axis,r=c.position==="top"?c.canvasRect.y+c.canvasRect.height:c.canvasRect.y,g=window.devicePixelRatio||1,v=r,h=(i??6)*g,f=c.position==="top"?r-h:r+h,S=(u??12)*g;n.save(),n.fontKerning="auto",N(n,{...e}),n.beginPath();const U=Array.isArray(m)?m:m({...o,axis:c},d());for(const{value:y}of U){const T=b(y,t,"canvas");n.moveTo(T,v),n.lineTo(T,f)}n.stroke(),n.restore(),n.save(),N(n,{textBaseline:c.position==="top"?"bottom":"top",textAlign:"center",...e,...a});for(const{value:y,label:T}of U){const A=b(y,t,"canvas"),C=T.split(`
`);for(let D=0;D<C.length;D++)n.fillText(C[D],A,f+g*2+D*S)}n.restore()},[m,t,e,a]),null),ce=({layer:s="BOTTOM",scaleId:t,tickStyle:e,labelStyle:a,labelGap:u,tickSize:i,ticks:m})=>(B(s,({getCtx:p,valToPos:b,getScale:l,getFrame:d})=>{const n=p(),o=l(t);if(!o||!o.axis||o.origin!=="y")return;const c=o.axis,r=c.position==="left"?c.canvasRect.x+c.canvasRect.width:c.canvasRect.x,g=r,v=i??6,h=c.position==="left"?r-v:r+v,f=u??12,S=Array.isArray(m)?m:m({...o,axis:c},d());n.save(),n.fontKerning="auto",N(n,{...e}),n.beginPath();for(const{value:U}of S){const y=b(U,t,"canvas");n.moveTo(g,y),n.lineTo(h,y)}n.stroke(),n.restore(),n.save(),N(n,{textBaseline:"middle",textAlign:c.position==="left"?"right":"left",...e,...a});for(const{value:U,label:y}of S){const T=b(U,t,"canvas"),A=y.split(`
`);for(let C=0;C<A.length;C++)n.fillText(` ${A[C]} `,h,T+C*f)}n.restore()},[m,t,e,a]),null),H=60,V=30,$="UTC",X="en-GB",ie=({space:s,formatter:t,acceptableIncrements:e}={})=>(a,u)=>{const{min:i,max:m}=a,p=[],b=window.devicePixelRatio||1,l=(s??(a.origin==="x"?H:V))*b,d=j(u,l,a.id),n=e??E,o=n.find(r=>r>d)??n.at(-1)??1;let c=i;if(Math.abs(c%o)>Number.EPSILON){const r=(o-c%o)%o;c+=r}for(;c<=m&&p.length<1e3;)p.push(c),c+=o;return(t??Y)(p)},Y=s=>{const t=Math.max(0,Math.ceil(-Math.log10(s[1]-s[0])));return s.map(e=>({value:e,label:e.toFixed(t)}))},E=[];for(let s=-12;s<=12;s++)E.push(1*10**s),E.push(2*10**s),E.push(5*10**s);const G=1,z=1e3*G,R=60*z,P=60*R,_=24*P,K=30*_,Z=365*_,q=[[1,"milliseconds"],[2,"milliseconds"],[5,"milliseconds"],[10,"milliseconds"],[20,"milliseconds"],[50,"milliseconds"],[100,"milliseconds"],[200,"milliseconds"],[500,"milliseconds"],[1,"seconds"],[5,"seconds"],[10,"seconds"],[15,"seconds"],[30,"seconds"],[1,"minutes"],[5,"minutes"],[10,"minutes"],[15,"minutes"],[30,"minutes"],[1,"hours"],[2,"hours"],[3,"hours"],[4,"hours"],[6,"hours"],[8,"hours"],[12,"hours"],[1,"days"],[3,"days"],[5,"days"],[7,"days"],[10,"days"],[15,"days"],[1,"months"],[2,"months"],[3,"months"],[4,"months"],[6,"months"],[1,"years"],[2,"years"],[5,"years"],[10,"years"],[25,"years"],[50,"years"],[100,"years"]],k=s=>{const[t,e]=s;switch(e){case"milliseconds":return t;case"seconds":return t*z;case"minutes":return t*R;case"hours":return t*P;case"days":return t*_;case"months":return t*K;case"years":return t*Z}},J=(s,t)=>{const e=new Date(s);return e.setUTCMilliseconds(e.getUTCMilliseconds()+t),e.getTime()},Q=(s,t)=>{const e=new Date(s);return e.setUTCSeconds(e.getUTCSeconds()+t),e.getTime()},W=(s,t)=>{const e=new Date(s);return e.setUTCMinutes(e.getUTCMinutes()+t),e.getTime()},ee=(s,t)=>{const e=new Date(s);return e.setUTCHours(e.getUTCHours()+t),e.getTime()},se=(s,t)=>{const e=new Date(s);return e.setUTCDate(e.getUTCDate()+t),e.getTime()},O=(s,t)=>{const e=new Date(s);return e.setUTCMonth(e.getUTCMonth()+t),e.getTime()},w=(s,t)=>{const[e,a]=t;switch(a){case"milliseconds":return J(s,e);case"seconds":return Q(s,e);case"minutes":return W(s,e);case"hours":return ee(s,e);case"days":return se(s,e);case"months":return O(s,e);case"years":return O(s,e*12)}};function L(s,t){const e=new Date(s),a=new Date(e.toLocaleString("en-US",{timeZone:t})),u=new Date(e.toLocaleString("en-US",{timeZone:"UTC"}));return(a.getTime()-u.getTime())/(3600*1e3)}const te=(s,t,e="UTC")=>{const[a,u]=t;let i=new Date(s);const m=()=>{i.setUTCHours(-L(i,e),0,0,0)};switch(u){case"milliseconds":i.setUTCMilliseconds(Math.ceil(i.getUTCMilliseconds()/a)*a);break;case"seconds":i.setUTCSeconds(Math.ceil(i.getUTCSeconds()/a)*a,0);break;case"minutes":i.setUTCMinutes(Math.ceil(i.getTime()%P/R/a)*a,0,0);break;case"hours":i.setUTCHours(Math.ceil(i.getTime()%_/P/a)*a,0,0,0);break;case"days":case"months":case"years":u==="months"?i.setUTCDate(1):u==="years"&&i.setUTCMonth(0,1),m(),i.getTime()<s&&(i=new Date(w(i,[1,u])));break}return i.getTime()},le=({timeZone:s=$,space:t=H,formatter:e,locale:a,showTimezone:u}={})=>(i,m)=>{const{min:p,max:b}=i,l=Math.floor(m.chartAreaCanvasPX.width/t)+1,n=(b-p)/l,[o,c]=q.find(f=>k(f)>=n)??[1,"milliseconds"],r=te(p,[o,c],s),g=L(r,s),v=[r];let h;for(;;){switch(c){case"milliseconds":case"seconds":case"minutes":case"hours":{h=w(r,[v.length*o,c]);break}case"days":{const f=w(r,[v.length*o,c]);h=w(f,[g-L(f,s),"hours"]);break}case"months":case"years":{const f=w(w(w(r,[g,"hours"]),[v.length*o,c]),[-g,"hours"]);h=w(f,[g-L(f,s),"hours"]);break}}if(h>b)break;v.push(h)}return(e??ne({locale:a,showTimezone:u,timeZone:s}))(v)},M=(s,t,e)=>s.find(a=>a.type===e)?.value!==t.find(a=>a.type===e)?.value,ne=({timeZone:s=$,locale:t=X,showTimezone:e=!0})=>{const a=new Intl.DateTimeFormat(t,{year:"numeric",day:"numeric",month:"short",hour:"numeric",hourCycle:"h23",minute:"numeric",second:"numeric",fractionalSecondDigits:3,timeZoneName:"short",timeZone:s});return u=>{const i=u[1]-u[0],m=i<k([1,"days"]),p=i<k([1,"minutes"]),b=i<k([1,"seconds"]);return u.map(l=>({value:l,label:a.formatToParts(new Date(l))})).map((l,d,n)=>{const o=n[d-1],c=d===0||M(l.label,o.label,"year"),r=d===0||M(l.label,o.label,"day"),g=d===0||M(l.label,o.label,"month"),v=d===0||M(l.label,o.label,"hour"),h=d===0||M(l.label,o.label,"timeZoneName"),f=d===0||M(l.label,o.label,"minute"),S=d===0||M(l.label,o.label,"second"),U=d===0||M(l.label,o.label,"fractionalSecond"),y=[];if(m&&(v||f||h||S||U)){const T=l.label.find(x=>x.type==="hour")?.value,A=l.label.find(x=>x.type==="minute")?.value,C=l.label.find(x=>x.type==="timeZoneName")?.value;let D="";if(p){const x=l.label.find(F=>F.type==="second")?.value,I=l.label.find(F=>F.type==="fractionalSecond")?.value;D=`:${x}`+(b?`.${I}`:"")}y.push(`${T}:${A}${D}`+(e&&h?` ${C}`:""))}return(r||g)&&y.push([l.label.find(T=>T.type==="month")?.value,r&&l.label.find(T=>T.type==="day")?.value].filter(Boolean).join(" ")),c&&y.push(l.label.find(T=>T.type==="year")?.value),{value:l.value,label:y.filter(T=>T).join(`
`)}})}};export{ae as X,ce as Y,le as a,ie as m};
