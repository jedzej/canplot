import{b as $,d as E,p as j}from"./CanPlot-Bu1g0GpU.js";const ae=({scaleId:e,tickStyle:t,labelStyle:s,labelGap:c,tickSize:l,ticks:o})=>($(({getCtx:y,valToPos:p,getScale:C,getFrame:i})=>{const n=y(),r=C(e);if(!r||!r.axis||r.origin!=="x")return;const a=r.axis,u=a.position==="top"?a.canvasRect.y+a.canvasRect.height:a.canvasRect.y,m=window.devicePixelRatio||1,b=u,h=(l??6)*m,f=a.position==="top"?u-h:u+h,d=(c??12)*m;n.save(),n.fontKerning="auto",E(n,{...t}),n.beginPath();const w=Array.isArray(o)?o:o({...r,axis:a},i());for(const{value:U}of w){const g=p(U,e,"canvas");n.moveTo(g,b),n.lineTo(g,f)}n.stroke(),n.restore(),n.save(),E(n,{textBaseline:a.position==="top"?"bottom":"top",textAlign:"center",...t,...s});for(const{value:U,label:g}of w){const T=p(U,e,"canvas"),v=g.split(`
`);for(let S=0;S<v.length;S++)n.fillText(v[S],T,f+m*2+S*d)}n.restore()},[o,e,t,s]),null),ie=({scaleId:e,tickStyle:t,labelStyle:s,labelGap:c,tickSize:l,ticks:o})=>($(({getCtx:y,valToPos:p,getScale:C,getFrame:i})=>{const n=y(),r=C(e);if(!r||!r.axis||r.origin!=="y")return;const a=r.axis,u=a.position==="left"?a.canvasRect.x+a.canvasRect.width:a.canvasRect.x,m=u,b=l??6,h=a.position==="left"?u-b:u+b,f=c??12,d=Array.isArray(o)?o:o({...r,axis:a},i());n.save(),n.fontKerning="auto",E(n,{...t}),n.beginPath();for(const{value:w}of d){const U=p(w,e,"canvas");n.moveTo(m,U),n.lineTo(h,U)}n.stroke(),n.restore(),n.save(),E(n,{textBaseline:"middle",textAlign:a.position==="left"?"right":"left",...t,...s});for(const{value:w,label:U}of d){const g=p(w,e,"canvas"),T=U.split(`
`);for(let v=0;v<T.length;v++)n.fillText(` ${T[v]} `,h,g+v*f)}n.restore()},[o,e,t,s]),null),z=60,I=30,B="UTC",X="en-GB",ce=({space:e,formatter:t}={})=>(s,c)=>{const{min:l,max:o}=s,y=[],p=window.devicePixelRatio||1,C=(e??(s.origin==="x"?z:I))*p,i=j(c,C,s.id),n=A.find(a=>a>i)??1;let r=l%n<Number.EPSILON?l:l+n-l%n;for(;r<=o;)y.push(r),r+=n;return(t??Y)(y)},Y=e=>{const t=Math.max(0,Math.ceil(-Math.log10(e[1]-e[0])));return e.map(s=>({value:s,label:s.toFixed(t)}))},A=[];for(let e=-12;e<=12;e++)A.push(1*10**e),A.push(2*10**e),A.push(5*10**e);const G=1,O=1e3*G,F=60*O,P=60*F,N=24*P,K=30*N,Z=365*N,q=[[1,"milliseconds"],[2,"milliseconds"],[5,"milliseconds"],[10,"milliseconds"],[20,"milliseconds"],[50,"milliseconds"],[100,"milliseconds"],[200,"milliseconds"],[500,"milliseconds"],[1,"seconds"],[5,"seconds"],[10,"seconds"],[15,"seconds"],[30,"seconds"],[1,"minutes"],[5,"minutes"],[10,"minutes"],[15,"minutes"],[30,"minutes"],[1,"hours"],[2,"hours"],[3,"hours"],[4,"hours"],[6,"hours"],[8,"hours"],[12,"hours"],[1,"days"],[3,"days"],[5,"days"],[7,"days"],[10,"days"],[15,"days"],[1,"months"],[2,"months"],[3,"months"],[4,"months"],[6,"months"],[1,"years"],[2,"years"],[5,"years"],[10,"years"],[25,"years"],[50,"years"],[100,"years"]],L=e=>{const[t,s]=e;switch(s){case"milliseconds":return t;case"seconds":return t*O;case"minutes":return t*F;case"hours":return t*P;case"days":return t*N;case"months":return t*K;case"years":return t*Z}},J=(e,t)=>{const s=new Date(e);return s.setUTCMilliseconds(s.getUTCMilliseconds()+t),s.getTime()},Q=(e,t)=>{const s=new Date(e);return s.setUTCSeconds(s.getUTCSeconds()+t),s.getTime()},W=(e,t)=>{const s=new Date(e);return s.setUTCMinutes(s.getUTCMinutes()+t),s.getTime()},ee=(e,t)=>{const s=new Date(e);return s.setUTCHours(s.getUTCHours()+t),s.getTime()},se=(e,t)=>{const s=new Date(e);return s.setUTCDate(s.getUTCDate()+t),s.getTime()},H=(e,t)=>{const s=new Date(e);return s.setUTCMonth(s.getUTCMonth()+t),s.getTime()},D=(e,t)=>{const[s,c]=t;switch(c){case"milliseconds":return J(e,s);case"seconds":return Q(e,s);case"minutes":return W(e,s);case"hours":return ee(e,s);case"days":return se(e,s);case"months":return H(e,s);case"years":return H(e,s*12)}};function k(e,t){const s=new Date(e),c=new Date(s.toLocaleString("en-US",{timeZone:t})),l=new Date(s.toLocaleString("en-US",{timeZone:"UTC"}));return(c.getTime()-l.getTime())/(3600*1e3)}const te=(e,t,s="UTC")=>{const[c,l]=t;let o=new Date(e);const y=()=>{o.setUTCHours(-k(o,s),0,0,0)};switch(l){case"milliseconds":o.setUTCMilliseconds(Math.ceil(o.getUTCMilliseconds()/c)*c);break;case"seconds":o.setUTCSeconds(Math.ceil(o.getUTCSeconds()/c)*c,0);break;case"minutes":o.setUTCMinutes(Math.ceil(o.getTime()%P/F/c)*c,0,0);break;case"hours":o.setUTCHours(Math.ceil(o.getTime()%N/P/c)*c,0,0,0);break;case"days":case"months":case"years":l==="months"?o.setUTCDate(1):l==="years"&&o.setUTCMonth(0,1),y(),o.getTime()<e&&(o=new Date(D(o,[1,l])));break}return o.getTime()},le=({timeZone:e=B,space:t=z,formatter:s,locale:c,showTimezone:l}={})=>(o,y)=>{const{min:p,max:C}=o,i=Math.floor(y.chartAreaCanvasPX.width/t)+1,r=(C-p)/i,[a,u]=q.find(d=>L(d)>=r)??[1,"milliseconds"],m=te(p,[a,u],e),b=k(m,e),h=[m];let f;for(;;){switch(u){case"milliseconds":case"seconds":case"minutes":case"hours":{f=D(m,[h.length*a,u]);break}case"days":{const d=D(m,[h.length*a,u]);f=D(d,[b-k(d,e),"hours"]);break}case"months":case"years":{const d=D(D(D(m,[b,"hours"]),[h.length*a,u]),[-b,"hours"]);f=D(d,[b-k(d,e),"hours"]);break}}if(f>C)break;h.push(f)}return(s??ne({locale:c,showTimezone:l,timeZone:e}))(h)},M=(e,t,s)=>e.find(c=>c.type===s)?.value!==t.find(c=>c.type===s)?.value,ne=({timeZone:e=B,locale:t=X,showTimezone:s=!0})=>{const c=new Intl.DateTimeFormat(t,{year:"numeric",day:"numeric",month:"short",hour:"numeric",hourCycle:"h23",minute:"numeric",second:"numeric",fractionalSecondDigits:3,timeZoneName:"short",timeZone:e});return l=>{const o=l[1]-l[0],y=o<L([1,"days"]),p=o<L([1,"minutes"]),C=o<L([1,"seconds"]);return l.map(i=>({value:i,label:c.formatToParts(new Date(i))})).map((i,n,r)=>{const a=r[n-1],u=n===0||M(i.label,a.label,"year"),m=n===0||M(i.label,a.label,"day"),b=n===0||M(i.label,a.label,"month"),h=n===0||M(i.label,a.label,"hour"),f=n===0||M(i.label,a.label,"timeZoneName"),d=n===0||M(i.label,a.label,"minute"),w=n===0||M(i.label,a.label,"second"),U=n===0||M(i.label,a.label,"fractionalSecond"),g=[];if(y&&(h||d||f||w||U)){const T=i.label.find(x=>x.type==="hour")?.value,v=i.label.find(x=>x.type==="minute")?.value,S=i.label.find(x=>x.type==="timeZoneName")?.value;let R="";if(p){const x=i.label.find(_=>_.type==="second")?.value,V=i.label.find(_=>_.type==="fractionalSecond")?.value;R=`:${x}`+(C?`.${V}`:"")}g.push(`${T}:${v}${R}`+(s&&f?` ${S}`:""))}return(m||b)&&g.push([i.label.find(T=>T.type==="month")?.value,m&&i.label.find(T=>T.type==="day")?.value].filter(Boolean).join(" ")),u&&g.push(i.label.find(T=>T.type==="year")?.value),{value:i.value,label:g.filter(T=>T).join(`
`)}})}};export{ae as X,ie as Y,le as a,ce as m};
