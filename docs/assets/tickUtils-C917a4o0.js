import{R as H}from"./iframe-CRxhtb6P.js";import{d as I,u as $,c as N,p as V}from"./frameContext-ClpSaL7J.js";const G=({layer:s="BOTTOM",scaleId:n,tickStyle:e,labelStyle:a,labelGap:r,tickSize:i,ticks:d})=>($(s,({ctx:o,valToPos:g,getScale:c,frame:T})=>{const u=c(n);if(!u||!u.axis||u.origin!=="x")return;const t=u.axis,l=t.position==="top"?t.canvasRect.y+t.canvasRect.height:t.canvasRect.y,m=window.devicePixelRatio||1,b=l,p=(i??6)*m,y=t.position==="top"?l-p:l+p,h=(r??12)*m;o.save(),o.fontKerning="auto",N(o,{...e}),o.beginPath();const M=Array.isArray(d)?d:d({...u,axis:t},T);for(const{value:C}of M){const v=g(C,n,"canvas");o.moveTo(v,b),o.lineTo(v,y)}o.stroke(),o.restore(),o.save(),N(o,{textBaseline:t.position==="top"?"bottom":"top",textAlign:"center",...e,...a});for(const{value:C,label:v}of M){const f=g(C,n,"canvas"),U=v.split(`
`);for(let k=0;k<U.length;k++)o.fillText(U[k],f,y+m*2+k*h)}o.restore()},[d,n,e,a]),null),ue=H.memo(G,I),K=({layer:s="BOTTOM",scaleId:n,tickStyle:e,labelStyle:a,labelGap:r,tickSize:i,ticks:d})=>($(s,({ctx:o,valToPos:g,getScale:c,frame:T})=>{const u=c(n);if(!u||!u.axis||u.origin!=="y")return;const t=u.axis,l=t.position==="left"?t.canvasRect.x+t.canvasRect.width:t.canvasRect.x,m=l,b=i??6,p=t.position==="left"?l-b:l+b,y=r??12,h=Array.isArray(d)?d:d({...u,axis:t},T);o.save(),o.fontKerning="auto",N(o,{...e}),o.beginPath();for(const{value:M}of h){const C=g(M,n,"canvas");o.moveTo(m,C),o.lineTo(p,C)}o.stroke(),o.restore(),o.save(),N(o,{textBaseline:"middle",textAlign:t.position==="left"?"right":"left",...e,...a});for(const{value:M,label:C}of h){const v=g(M,n,"canvas"),f=C.split(`
`);for(let U=0;U<f.length;U++)o.fillText(` ${f[U]} `,p,v+U*y)}o.restore()},[d,n,e,a]),null),me=H.memo(K,I),z=60,Z=30,X="UTC",q="en-GB",de=({space:s,formatter:n,acceptableIncrements:e}={})=>(a,r)=>{const{min:i,max:d}=a,o=[],g=window.devicePixelRatio||1,c=(s??(a.origin==="x"?z:Z))*g,T=V(r,c,a.id),u=e??A,t=u.find(m=>m>T)??u.at(-1)??1;let l=i;if(Math.abs(l%t)>Number.EPSILON){const m=(t-l%t)%t;l+=m}for(;l<=d&&o.length<1e3;)o.push(l),l+=t;return(n??x)(o)},x=s=>{const n=Math.max(0,Math.ceil(-Math.log10(s[1]-s[0])));return s.map(e=>({value:e,label:e.toFixed(n)}))},A=[];for(let s=-12;s<=12;s++)A.push(1*10**s),A.push(2*10**s),A.push(5*10**s);const J=1,Y=1e3*J,F=60*Y,P=60*F,R=24*P,Q=30*R,W=365*R,ee=[[1,"milliseconds"],[2,"milliseconds"],[5,"milliseconds"],[10,"milliseconds"],[20,"milliseconds"],[50,"milliseconds"],[100,"milliseconds"],[200,"milliseconds"],[500,"milliseconds"],[1,"seconds"],[5,"seconds"],[10,"seconds"],[15,"seconds"],[30,"seconds"],[1,"minutes"],[5,"minutes"],[10,"minutes"],[15,"minutes"],[30,"minutes"],[1,"hours"],[2,"hours"],[3,"hours"],[4,"hours"],[6,"hours"],[8,"hours"],[12,"hours"],[1,"days"],[3,"days"],[5,"days"],[7,"days"],[10,"days"],[15,"days"],[1,"months"],[2,"months"],[3,"months"],[4,"months"],[6,"months"],[1,"years"],[2,"years"],[5,"years"],[10,"years"],[25,"years"],[50,"years"],[100,"years"]],E=s=>{const[n,e]=s;switch(e){case"milliseconds":return n;case"seconds":return n*Y;case"minutes":return n*F;case"hours":return n*P;case"days":return n*R;case"months":return n*Q;case"years":return n*W}},se=(s,n)=>{const e=new Date(s);return e.setUTCMilliseconds(e.getUTCMilliseconds()+n),e.getTime()},ne=(s,n)=>{const e=new Date(s);return e.setUTCSeconds(e.getUTCSeconds()+n),e.getTime()},te=(s,n)=>{const e=new Date(s);return e.setUTCMinutes(e.getUTCMinutes()+n),e.getTime()},oe=(s,n)=>{const e=new Date(s);return e.setUTCHours(e.getUTCHours()+n),e.getTime()},ae=(s,n)=>{const e=new Date(s);return e.setUTCDate(e.getUTCDate()+n),e.getTime()},B=(s,n)=>{const e=new Date(s);return e.setUTCMonth(e.getUTCMonth()+n),e.getTime()},D=(s,n)=>{const[e,a]=n;switch(a){case"milliseconds":return se(s,e);case"seconds":return ne(s,e);case"minutes":return te(s,e);case"hours":return oe(s,e);case"days":return ae(s,e);case"months":return B(s,e);case"years":return B(s,e*12)}};function L(s,n){const e=new Date(s),a=new Date(e.toLocaleString("en-US",{timeZone:n})),r=new Date(e.toLocaleString("en-US",{timeZone:"UTC"}));return(a.getTime()-r.getTime())/(3600*1e3)}const ie=(s,n,e="UTC")=>{const[a,r]=n;let i=new Date(s);const d=()=>{i.setUTCHours(-L(i,e),0,0,0)};switch(r){case"milliseconds":i.setUTCMilliseconds(Math.ceil(i.getUTCMilliseconds()/a)*a);break;case"seconds":i.setUTCSeconds(Math.ceil(i.getUTCSeconds()/a)*a,0);break;case"minutes":i.setUTCMinutes(Math.ceil(i.getTime()%P/F/a)*a,0,0);break;case"hours":i.setUTCHours(Math.ceil(i.getTime()%R/P/a)*a,0,0,0);break;case"days":case"months":case"years":r==="months"?i.setUTCDate(1):r==="years"&&i.setUTCMonth(0,1),d(),i.getTime()<s&&(i=new Date(D(i,[1,r])));break}return i.getTime()},Te=({timeZone:s=X,space:n=z,formatter:e,locale:a,showTimezone:r}={})=>(i,d)=>{const{min:o,max:g}=i,c=Math.floor(d.chartAreaCanvasPX.width/n)+1,u=(g-o)/c,[t,l]=ee.find(h=>E(h)>=u)??[1,"milliseconds"],m=ie(o,[t,l],s),b=L(m,s),p=[m];let y;for(;;){switch(l){case"milliseconds":case"seconds":case"minutes":case"hours":{y=D(m,[p.length*t,l]);break}case"days":{const h=D(m,[p.length*t,l]);y=D(h,[b-L(h,s),"hours"]);break}case"months":case"years":{const h=D(D(D(m,[b,"hours"]),[p.length*t,l]),[-b,"hours"]);y=D(h,[b-L(h,s),"hours"]);break}}if(y>g)break;p.push(y)}return(e??ce({locale:a,showTimezone:r,timeZone:s}))(p)},w=(s,n,e)=>s.find(a=>a.type===e)?.value!==n.find(a=>a.type===e)?.value,ce=({timeZone:s=X,locale:n=q,showTimezone:e=!0})=>{const a=new Intl.DateTimeFormat(n,{year:"numeric",day:"numeric",month:"short",hour:"numeric",hourCycle:"h23",minute:"numeric",second:"numeric",fractionalSecondDigits:3,timeZoneName:"short",timeZone:s});return r=>{const i=r[1]-r[0],d=i<E([1,"days"]),o=i<E([1,"minutes"]),g=i<E([1,"seconds"]);return r.map(c=>({value:c,label:a.formatToParts(new Date(c))})).map((c,T,u)=>{const t=u[T-1],l=T===0||w(c.label,t.label,"year"),m=T===0||w(c.label,t.label,"day"),b=T===0||w(c.label,t.label,"month"),p=T===0||w(c.label,t.label,"hour"),y=T===0||w(c.label,t.label,"timeZoneName"),h=T===0||w(c.label,t.label,"minute"),M=T===0||w(c.label,t.label,"second"),C=T===0||w(c.label,t.label,"fractionalSecond"),v=[];if(d&&(p||h||y||M||C)){const f=c.label.find(S=>S.type==="hour")?.value,U=c.label.find(S=>S.type==="minute")?.value,k=c.label.find(S=>S.type==="timeZoneName")?.value;let O="";if(o){const S=c.label.find(_=>_.type==="second")?.value,j=c.label.find(_=>_.type==="fractionalSecond")?.value;O=`:${S}`+(g?`.${j}`:"")}v.push(`${f}:${U}${O}`+(e&&y?` ${k}`:""))}return(m||b)&&v.push([c.label.find(f=>f.type==="month")?.value,m&&c.label.find(f=>f.type==="day")?.value].filter(Boolean).join(" ")),l&&v.push(c.label.find(f=>f.type==="year")?.value),{value:c.value,label:v.filter(f=>f).join(`
`)}})}};export{ue as X,me as Y,Te as a,de as m};
