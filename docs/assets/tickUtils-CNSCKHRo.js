import{p as V}from"./CanPlot-nn6GHReb.js";const _=60,R=30,F="UTC",j="en-GB",ne=({space:s,formatter:t,acceptableIncrements:e}={})=>(n,i)=>{const{min:o,max:C}=n,T=[],M=window.devicePixelRatio||1,a=(s??(n.origin==="x"?_:R))*M,r=V(i,a,n.id),g=e??D,c=g.find(u=>u>r)??g.at(-1)??1;let l=o;if(Math.abs(l%c)>Number.EPSILON){const u=(c-l%c)%c;l+=u}for(;l<=C&&T.length<1e3;)T.push(l),l+=c;return(t??x)(T)},x=s=>{const t=Math.max(0,Math.ceil(-Math.log10(s[1]-s[0])));return s.map(e=>({value:e,label:e.toFixed(t)}))},D=[];for(let s=-12;s<=12;s++)D.push(1*10**s),D.push(2*10**s),D.push(5*10**s);const X=1,I=1e3*X,N=60*I,k=60*N,E=24*k,Y=30*E,Z=365*E,G=[[1,"milliseconds"],[2,"milliseconds"],[5,"milliseconds"],[10,"milliseconds"],[20,"milliseconds"],[50,"milliseconds"],[100,"milliseconds"],[200,"milliseconds"],[500,"milliseconds"],[1,"seconds"],[5,"seconds"],[10,"seconds"],[15,"seconds"],[30,"seconds"],[1,"minutes"],[5,"minutes"],[10,"minutes"],[15,"minutes"],[30,"minutes"],[1,"hours"],[2,"hours"],[3,"hours"],[4,"hours"],[6,"hours"],[8,"hours"],[12,"hours"],[1,"days"],[3,"days"],[5,"days"],[7,"days"],[10,"days"],[15,"days"],[1,"months"],[2,"months"],[3,"months"],[4,"months"],[6,"months"],[1,"years"],[2,"years"],[5,"years"],[10,"years"],[25,"years"],[50,"years"],[100,"years"]],S=s=>{const[t,e]=s;switch(e){case"milliseconds":return t;case"seconds":return t*I;case"minutes":return t*N;case"hours":return t*k;case"days":return t*E;case"months":return t*Y;case"years":return t*Z}},K=(s,t)=>{const e=new Date(s);return e.setUTCMilliseconds(e.getUTCMilliseconds()+t),e.getTime()},q=(s,t)=>{const e=new Date(s);return e.setUTCSeconds(e.getUTCSeconds()+t),e.getTime()},J=(s,t)=>{const e=new Date(s);return e.setUTCMinutes(e.getUTCMinutes()+t),e.getTime()},Q=(s,t)=>{const e=new Date(s);return e.setUTCHours(e.getUTCHours()+t),e.getTime()},W=(s,t)=>{const e=new Date(s);return e.setUTCDate(e.getUTCDate()+t),e.getTime()},P=(s,t)=>{const e=new Date(s);return e.setUTCMonth(e.getUTCMonth()+t),e.getTime()},y=(s,t)=>{const[e,n]=t;switch(n){case"milliseconds":return K(s,e);case"seconds":return q(s,e);case"minutes":return J(s,e);case"hours":return Q(s,e);case"days":return W(s,e);case"months":return P(s,e);case"years":return P(s,e*12)}};function v(s,t){const e=new Date(s),n=new Date(e.toLocaleString("en-US",{timeZone:t})),i=new Date(e.toLocaleString("en-US",{timeZone:"UTC"}));return(n.getTime()-i.getTime())/(3600*1e3)}const ee=(s,t,e="UTC")=>{const[n,i]=t;let o=new Date(s);const C=()=>{o.setUTCHours(-v(o,e),0,0,0)};switch(i){case"milliseconds":o.setUTCMilliseconds(Math.ceil(o.getUTCMilliseconds()/n)*n);break;case"seconds":o.setUTCSeconds(Math.ceil(o.getUTCSeconds()/n)*n,0);break;case"minutes":o.setUTCMinutes(Math.ceil(o.getTime()%k/N/n)*n,0,0);break;case"hours":o.setUTCHours(Math.ceil(o.getTime()%E/k/n)*n,0,0,0);break;case"days":case"months":case"years":i==="months"?o.setUTCDate(1):i==="years"&&o.setUTCMonth(0,1),C(),o.getTime()<s&&(o=new Date(y(o,[1,i])));break}return o.getTime()},oe=({timeZone:s=F,space:t=_,formatter:e,locale:n,showTimezone:i}={})=>(o,C)=>{const{min:T,max:M}=o,a=Math.floor(C.chartAreaCanvasPX.width/t)+1,g=(M-T)/a,[c,l]=G.find(m=>S(m)>=g)??[1,"milliseconds"],u=ee(T,[c,l],s),p=v(u,s),U=[u];let h;for(;;){switch(l){case"milliseconds":case"seconds":case"minutes":case"hours":{h=y(u,[U.length*c,l]);break}case"days":{const m=y(u,[U.length*c,l]);h=y(m,[p-v(m,s),"hours"]);break}case"months":case"years":{const m=y(y(y(u,[p,"hours"]),[U.length*c,l]),[-p,"hours"]);h=y(m,[p-v(m,s),"hours"]);break}}if(h>M)break;U.push(h)}return(e??se({locale:n,showTimezone:i,timeZone:s}))(U)},f=(s,t,e)=>s.find(n=>n.type===e)?.value!==t.find(n=>n.type===e)?.value,se=({timeZone:s=F,locale:t=j,showTimezone:e=!0})=>{const n=new Intl.DateTimeFormat(t,{year:"numeric",day:"numeric",month:"short",hour:"numeric",hourCycle:"h23",minute:"numeric",second:"numeric",fractionalSecondDigits:3,timeZoneName:"short",timeZone:s});return i=>{const o=i[1]-i[0],C=o<S([1,"days"]),T=o<S([1,"minutes"]),M=o<S([1,"seconds"]);return i.map(a=>({value:a,label:n.formatToParts(new Date(a))})).map((a,r,g)=>{const c=g[r-1],l=r===0||f(a.label,c.label,"year"),u=r===0||f(a.label,c.label,"day"),p=r===0||f(a.label,c.label,"month"),U=r===0||f(a.label,c.label,"hour"),h=r===0||f(a.label,c.label,"timeZoneName"),m=r===0||f(a.label,c.label,"minute"),H=r===0||f(a.label,c.label,"second"),$=r===0||f(a.label,c.label,"fractionalSecond"),w=[];if(C&&(U||m||h||H||$)){const d=a.label.find(b=>b.type==="hour")?.value,O=a.label.find(b=>b.type==="minute")?.value,z=a.label.find(b=>b.type==="timeZoneName")?.value;let A="";if(T){const b=a.label.find(L=>L.type==="second")?.value,B=a.label.find(L=>L.type==="fractionalSecond")?.value;A=`:${b}`+(M?`.${B}`:"")}w.push(`${d}:${O}${A}`+(e&&h?` ${z}`:""))}return(u||p)&&w.push([a.label.find(d=>d.type==="month")?.value,u&&a.label.find(d=>d.type==="day")?.value].filter(Boolean).join(" ")),l&&w.push(a.label.find(d=>d.type==="year")?.value),{value:a.value,label:w.filter(d=>d).join(`
`)}})}};export{oe as a,ne as m};
