var Nt=Object.defineProperty;var h=(t,e)=>Nt(t,"name",{value:e,configurable:!0});import{r as K}from"./jsx-runtime.3513c91a.js";function b(t,e,i,n){if(i==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?n:i==="a"?n.call(t):n?n.value:e.get(t)}h(b,"b");function O(t,e,i,n,a){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!a:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?a.call(t,i):a?a.value=i:e.set(t,i),i}h(O,"M");const Wt=50,rt="primary",bt="center",wt=5,St=10,kt=60,Tt="UTC",Rt="en-GB",Pt=25,_t=10,tt=h((t,e,i)=>Math.min(Math.max(t,e),i),"Q"),Bt=h((t,e)=>{let i=0;for(let n=0;n<t.length;n++)Math.abs(t[n]-e)<Math.abs(t[i]-e)&&(i=n);return i},"zt"),F=h(t=>t.startsWith("x-"),"j"),Ht=h(t=>t.startsWith("y-"),"Nt"),R=h((t,e,i)=>{const n=t.chartArea,{min:a,max:s}=t.limits[i],o=(F(i)?n.width:n.height)/(s-a);return e*o},"z"),S=h((t,e,i)=>{const{min:n}=t.limits[i],a=t.chartArea,s=R(t,e-n,i);return F(i)?tt(a.x+s,a.x-10*a.width,a.x+11*a.width):tt(a.y+a.height-s,a.y-10*a.height,a.y+11*a.height)},"T"),lt=h((t,e,i)=>{const{min:n,max:a}=t.limits[i],s=t.chartArea,o=(F(i)?s.width:s.height)/(a-n);return e/o},"lt"),ot=h((t,e,i)=>{const{min:n,max:a}=t.limits[i],s=lt(t,e,i);return F(i)?n+s:a-s},"st"),P=h((t,e)=>{var i,n,a,s,o,l,c,r,d,u,f,x;t.lineCap=(i=e==null?void 0:e.lineCap)!==null&&i!==void 0?i:"butt",t.lineDashOffset=(n=e==null?void 0:e.lineDashOffset)!==null&&n!==void 0?n:0,t.lineJoin=(a=e==null?void 0:e.lineJoin)!==null&&a!==void 0?a:"miter",t.lineWidth=(s=e==null?void 0:e.lineWidth)!==null&&s!==void 0?s:1,t.miterLimit=(o=e==null?void 0:e.miterLimit)!==null&&o!==void 0?o:10,t.strokeStyle=(l=e==null?void 0:e.strokeStyle)!==null&&l!==void 0?l:"black",t.fillStyle=(c=e==null?void 0:e.fillStyle)!==null&&c!==void 0?c:t.strokeStyle,t.font=(r=e==null?void 0:e.font)!==null&&r!==void 0?r:"10px sans-serif",t.textAlign=(d=e==null?void 0:e.textAlign)!==null&&d!==void 0?d:"start",t.direction=(u=e==null?void 0:e.direction)!==null&&u!==void 0?u:"inherit",t.textBaseline=(f=e==null?void 0:e.textBaseline)!==null&&f!==void 0?f:"alphabetic",t.fontKerning=(x=e==null?void 0:e.fontKerning)!==null&&x!==void 0?x:"auto"},"k"),Mt=h(t=>{if(typeof t=="number"||typeof t>"u"){const e=t!=null?t:_t;return{top:e,right:e,bottom:e,left:e}}return Object.assign({},t)},"xt"),Zt=h((t,e,i=100,n=1/0)=>{const{series:a}=e.inputParams;return t?a.map(s=>{if(s.x.length<0)return;const o=Bt(s.x,t.scaled[s.xScaleId]);if(Number.isFinite(i)){const l=S(e,s.x[o],s.xScaleId);if(Math.abs(t.canvas.x-l)>i)return}if(Number.isFinite(n)){const l=S(e,s.y[o],s.yScaleId);if(Math.abs(t.canvas.y-l)>n)return}return{x:s.x[o],y:s.y[o]}}):a.map(()=>{})},"Wt"),me=Object.freeze(Object.defineProperty({__proto__:null,isXScale:F,isYScale:Ht,valToPxDistance:R,valToPos:S,pxToValDistance:lt,posToVal:ot,applyStyles:P,normalizePadding:Mt,findClosestDataPoint:Zt},Symbol.toStringTag,{value:"Module"})),V=[];for(let t=-12;t<=12;t++)V.push(1*Math.pow(10,t)),V.push(2*Math.pow(10,t)),V.push(5*Math.pow(10,t));const H=h(t=>{var e;return((e=t.position)!==null&&e!==void 0?e:rt)==="primary"},"B"),Ct=h(({space:t=kt}={})=>({frame:e,scale:i})=>{var n;const a=e.limits[i.id],s=[],o=lt(e,t,i.id),l=(n=V.find(r=>r>o))!==null&&n!==void 0?n:1;let c=a.min%l<Number.EPSILON?a.min:a.min+l-a.min%l;for(;c<=a.max;)s.push(c),c+=l;return s},"St"),Ot=h(({ticks:t})=>{const e=Math.max(0,Math.ceil(-Math.log10(t[1]-t[0])));return t.map(i=>i.toFixed(e))},"Ct"),ht=h((t,e,i,n)=>{var a,s,o,l,c;const{ctx:r}=t,d=(a=e.tickSize)!==null&&a!==void 0?a:wt,u=n,f=H(e)?n-d:n+d,x=(s=e.multilineGap)!==null&&s!==void 0?s:St,v=(l=((o=e.genTicks)!==null&&o!==void 0?o:Ct())({frame:t,scale:i,axis:e}))!==null&&l!==void 0?l:[],k=((c=e.tickFormat)!==null&&c!==void 0?c:Ot)({frame:t,scale:i,ticks:v});r.save(),P(r,Object.assign(Object.assign({},e.axisStyle),e.tickStyle)),r.beginPath();for(let g=0;g<v.length;g++){const p=S(t,v[g],i.id);r.moveTo(u,p),r.lineTo(f,p)}r.stroke(),r.restore(),r.save(),P(r,Object.assign(Object.assign({textBaseline:"middle",textAlign:H(e)?"right":"left"},e.axisStyle),e.tickLabelStyle));for(let g=0;g<v.length;g++){const p=S(t,v[g],i.id),m=k[g].split(`
`);for(let y=0;y<m.length;y++)r.fillText(m[y],f,p+y*x)}r.restore()},"dt"),ut=h((t,e,i,n,a)=>{t.save(),P(t,e.axisStyle),t.beginPath(),t.moveTo(i,n),t.lineTo(i,a),t.closePath(),t.stroke(),t.restore()},"ut"),ft=h((t,e,i,n)=>{var a,s,o,l,c,r;const{ctx:d}=t,u=(a=e.position)!==null&&a!==void 0?a:rt,f=(s=e.tickSize)!==null&&s!==void 0?s:wt,x=n,v=u==="primary"?n+f:n-f,k=(o=e.multilineGap)!==null&&o!==void 0?o:St,g=(c=((l=e.genTicks)!==null&&l!==void 0?l:Ct())({frame:t,scale:i,axis:e}))!==null&&c!==void 0?c:[],p=((r=e.tickFormat)!==null&&r!==void 0?r:Ot)({frame:t,scale:i,ticks:g});d.save(),P(d,Object.assign(Object.assign({},e.axisStyle),e.tickStyle)),d.beginPath();for(let m=0;m<g.length;m++){const y=S(t,g[m],i.id);d.moveTo(y,x),d.lineTo(y,v)}d.stroke(),d.restore(),d.save(),P(d,Object.assign(Object.assign({textBaseline:u==="primary"?"top":"bottom",textAlign:"center"},e.axisStyle),e.tickLabelStyle));for(let m=0;m<g.length;m++){const y=S(t,g[m],i.id),w=p[m].split(`
`);for(let T=0;T<w.length;T++)d.fillText(w[T],y,v+T*k)}d.restore()},"ht"),mt=h((t,e,i)=>{var n,a;if(!e.label)return;const{ctx:s}=t;s.save();let o,l;switch((n=e.labelAlign)!==null&&n!==void 0?n:bt){case"start":l="left",o=t.chartArea.x;break;case"end":l="right",o=t.chartArea.x+t.chartArea.width;break;case"center":l="center",o=t.chartArea.x+t.chartArea.width/2;break}P(s,Object.assign({textBaseline:H(e)?"top":"bottom",textAlign:l},e.labelStyle));const c=(a=e.labelOffset)!==null&&a!==void 0?a:Pt,r=H(e)?i+c:i-c;s.fillText(e.label,o,r),s.restore()},"vt"),vt=h((t,e,i,n,a)=>{t.save(),P(t,e.axisStyle),t.beginPath(),t.moveTo(n,i),t.lineTo(a,i),t.closePath(),t.stroke(),t.restore()},"ft"),pt=h((t,e,i)=>{var n,a;if(!e.label)return;const{ctx:s}=t;s.save();let o,l;switch((n=e.labelAlign)!==null&&n!==void 0?n:bt){case"start":l="bottom",o=t.chartArea.y+t.chartArea.height;break;case"end":l="top",o=t.chartArea.y;break;case"center":l="middle",o=t.chartArea.y+t.chartArea.height/2;break}P(s,Object.assign({textBaseline:l,textAlign:H(e)?"right":"left"},e.labelStyle));const c=(a=e.labelOffset)!==null&&a!==void 0?a:Pt,r=H(e)?i-c:i+c;s.fillText(e.label,r,o),s.restore()},"mt"),Xt=h(t=>{var e,i;const{ctx:n,chartArea:a,inputParams:s,canvasSize:o,padding:l}=t,c=a.x,r=a.x+a.width,d=a.y,u=a.y+a.height;let f=l.left,x=o.width-l.right,v=o.height-l.bottom,k=l.top;for(const g of s.axes){const p=s.scales.find(w=>w.id===g.scaleId);if(!p)continue;const m=(e=g.size)!==null&&e!==void 0?e:Wt,y=(i=g.position)!==null&&i!==void 0?i:rt;F(p.id)?y==="primary"?(v-=m,vt(n,g,v,c,r),ft(t,g,p,v),mt(t,g,v)):(k+=m,vt(n,g,k,c,r),ft(t,g,p,k),mt(t,g,k)):y==="primary"?(f+=m,ut(n,g,f,d,u),ht(t,g,p,f),pt(t,g,f)):(x-=m,ut(n,g,x,d,u),ht(t,g,p,x),pt(t,g,x))}},"Ht"),Z=h((t,e)=>{const i=t.inputParams.scales.find(n=>n.id===e);return i||console.error("No scale found",e),i},"R"),$t=h((t,e)=>{const{ctx:i,chartArea:n}=t,a=Z(t,e.scaleId);if(!a)return;const s=S(t,e.x,a.id);i.save(),P(i,e.style),i.beginPath(),i.moveTo(s,n.y),i.lineTo(s,n.y+n.height),i.stroke(),i.restore()},"Bt"),Yt=h((t,e)=>{const{ctx:i,chartArea:n}=t,a=Z(t,e.scaleId);if(!a)return;const s=S(t,e.y,a.id);i.save(),P(i,e.style),i.beginPath(),i.moveTo(n.x,s),i.lineTo(n.x+n.width,s),i.stroke(),i.restore()},"Rt"),Gt=h((t,e)=>{const{ctx:i}=t,n=Z(t,e.xScaleId),a=Z(t,e.yScaleId);if(!n||!a)return;const s=S(t,e.x,n.id),o=S(t,e.y,a.id);i.save(),P(i,e.style),i.beginPath(),i.arc(s,o,e.radius,0,2*Math.PI),i.stroke(),i.fill(),i.restore()},"Xt"),Jt=h((t,e)=>{const{ctx:i,chartArea:n}=t;let a=n.x,s=n.x+n.width,o=n.y,l=n.y+n.height;if(e.x){const c=Z(t,e.x.scaleId);if(!c)return;typeof e.x.min=="number"&&(a=Math.ceil(S(t,e.x.min,c.id))),typeof e.x.max=="number"&&(s=Math.ceil(S(t,e.x.max,c.id)))}if(e.y){const c=Z(t,e.y.scaleId);if(!c)return;typeof e.y.min=="number"&&(o=Math.ceil(S(t,e.y.min,c.id))),typeof e.y.max=="number"&&(l=Math.ceil(S(t,e.y.max,c.id)))}i.save(),P(i,e.style),i.beginPath(),i.fillRect(a,o,s-a,l-o),i.restore()},"Yt"),Kt=h((t,e)=>{t.ctx.save(),P(t.ctx,e.style),e.draw(t,e),t.ctx.restore()},"Gt"),at=h((t,e)=>{var i,n;const{inputParams:a}=t,s=(n=(i=a.facets)===null||i===void 0?void 0:i.filter(o=>{var l;return((l=o.layer)!==null&&l!==void 0?l:"bottom")===e}))!==null&&n!==void 0?n:[];for(const o of s)switch(o.type){case"custom":Kt(t,o);break;case"v-line":$t(t,o);break;case"h-line":Yt(t,o);break;case"circle":Gt(t,o);break;case"span":Jt(t,o);break}},"ot"),Vt=h(({frame:t,scaleId:e})=>{let i=1/0,n=-1/0;for(const a of t.inputParams.series)if(F(e)){if(a.xScaleId!==e)continue;for(const s of a.x)s<i&&(i=s),s>n&&(n=s)}else{if(a.yScaleId!==e)continue;for(const s of a.y)s<i&&(i=s),s>n&&(n=s)}return Number.isFinite(i)&&Number.isFinite(n)?{min:i,max:n}:{min:0,max:1}},"Vt"),qt=h(t=>{var e;const{ctx:i,inputParams:n}=t;i.save();for(const a of n.series){const s=n.scales.find(l=>l.id===a.xScaleId),o=n.scales.find(l=>l.id===a.yScaleId);!s||!o||(e=a.plotter)===null||e===void 0||e.call(a,t,a,s,o)}t.ctx.restore()},"Zt");var U,Y,C,D,G,B,et,X,j,gt,jt,$;const Qt=h(({ctx:t,canvasSize:{width:e,height:i}})=>{t.clearRect(0,0,e,i)},"$t");class At{constructor(e,i){var n,a,s;U.add(this),Y.set(this,void 0),C.set(this,void 0),D.set(this,void 0),G.set(this,void 0),B.set(this,!1),et.set(this,[]),X.set(this,void 0),j.set(this,"not-attached"),Object.defineProperty(this,"parentResizeObserver",{enumerable:!0,configurable:!0,writable:!0,value:new ResizeObserver(c=>{for(const r of c)O(this,G,{width:r.contentRect.width,height:r.contentRect.height},"f"),b(this,U,"m",$).call(this,b(this,D,"f"))})});const{width:o="auto",height:l="auto"}=(n=e.dimensions)!==null&&n!==void 0?n:{};O(this,Y,{width:o,height:l},"f"),O(this,C,(s=(a=e.plugins)===null||a===void 0?void 0:a.map((c,r)=>{var d;return{setState:u=>{b(this,C,"f")[r].state=u(b(this,C,"f")[r].state),b(this,U,"m",$).call(this,b(this,D,"f"))},state:(d=c.initState)===null||d===void 0?void 0:d.call(c),config:c}}))!==null&&s!==void 0?s:[],"f"),O(this,D,i,"f"),e.canvas&&this.attach(e.canvas)}getPhase(){return b(this,j,"f")}attach(e){if(b(this,j,"f")!=="not-attached")throw new Error("Plot already attached");O(this,j,"initializing","f"),O(this,X,e,"f");const{width:i,height:n}=b(this,Y,"f");typeof i=="number"&&Number.isFinite(i)&&(e.width=i),typeof n=="number"&&Number.isFinite(n)&&(e.height=n),i==="auto"||n==="auto"?this.parentResizeObserver.observe(e.parentElement):b(this,U,"m",$).call(this,b(this,D,"f"))}getCanvas(){if(!b(this,X,"f"))throw new Error("Canvas not attached");return b(this,X,"f")}update(e){let i;if(e instanceof Function)if(b(this,j,"f")==="initialized")try{i=e(b(this,D,"f"))}catch(n){console.error(n);return}else{console.error("Cannot update plot before it is initialized: "+b(this,j,"f"));return}else i=e;O(this,D,i,"f"),b(this,U,"m",$).call(this,i)}getFrame(e=b(this,D,"f")){let i=e;for(const a of b(this,C,"f"))a.config.transformInputParams&&(i=a.config.transformInputParams({inputParams:i,plot:this,thisPlugin:a}));let n=b(this,U,"m",jt).call(this,i);for(const a of b(this,C,"f"))a.config.transformFrame&&(n=a.config.transformFrame({frame:n,plot:this,thisPlugin:a}));return n}destroy(){var e,i;this.parentResizeObserver.disconnect(),O(this,j,"destroyed","f");for(const n of b(this,C,"f"))(i=(e=n.config.hooks)===null||e===void 0?void 0:e.onDestroy)===null||i===void 0||i.call(e,{plot:this,thisPlugin:n});for(const n of b(this,et,"f"))n()}}h(At,"re");Y=new WeakMap,C=new WeakMap,D=new WeakMap,G=new WeakMap,B=new WeakMap,et=new WeakMap,X=new WeakMap,j=new WeakMap,U=new WeakSet,gt=h(function(){const{width:t,height:e}=b(this,Y,"f"),i=this.getCanvas();i.width=t==="auto"?b(this,G,"f").width:t,i.height=e==="auto"?b(this,G,"f").height:e},"gt"),jt=h(function(t){var e,i;const n=Mt(t.padding);let a=0,s=0,o=0,l=0;for(const u of t.axes){const f=(e=u.size)!==null&&e!==void 0?e:50,x=(i=u.position)!==null&&i!==void 0?i:"primary";F(u.scaleId)?x==="primary"?o+=f:l+=f:x==="primary"?a+=f:s+=f}const c=this.getCanvas(),r={width:c.width,height:c.height},d={ctx:c.getContext("2d"),chartArea:{x:a+n.left,y:l+n.top,width:r.width-a-s-n.left-n.right,height:r.height-l-o-n.top-n.bottom},padding:n,canvasSize:r,inputParams:t};return Object.assign(Object.assign({},d),{limits:Object.fromEntries(t.scales.map(u=>{var f;return[u.id,((f=u.makeLimits)!==null&&f!==void 0?f:Vt)({frame:d,scaleId:u.id})]}))})},"Mt"),$=h(function(t){var e,i,n,a,s,o,l,c,r,d;if(b(this,j,"f")==="destroyed")return;if(b(this,B,"f")){console.error("Cannot redraw while redrawing");return}O(this,B,!0,"f"),b(this,U,"m",gt).call(this);const u=this.getFrame(t);if(b(this,j,"f")==="initializing"){for(const f of b(this,C,"f")){const x=(i=(e=f.config.hooks)===null||e===void 0?void 0:e.onInit)===null||i===void 0?void 0:i.call(e,{frame:u,plot:this,thisPlugin:f});x&&b(this,et,"f").push(x)}O(this,j,"initialized","f")}for(const f of b(this,C,"f"))(a=(n=f.config.hooks)===null||n===void 0?void 0:n.beforeClear)===null||a===void 0||a.call(n,{frame:u,plot:this,thisPlugin:f});Qt(u);for(const f of b(this,C,"f"))(o=(s=f.config.hooks)===null||s===void 0?void 0:s.afterClear)===null||o===void 0||o.call(s,{frame:u,plot:this,thisPlugin:f});if(u.chartArea.height<0||u.chartArea.width<0){O(this,B,!1,"f");return}at(u,"bottom"),qt(u);for(const f of b(this,C,"f"))(c=(l=f.config.hooks)===null||l===void 0?void 0:l.afterSeries)===null||c===void 0||c.call(l,{frame:u,plot:this,thisPlugin:f});at(u,"middle"),Xt(u);for(const f of b(this,C,"f"))(d=(r=f.config.hooks)===null||r===void 0?void 0:r.afterAxes)===null||d===void 0||d.call(r,{frame:u,plot:this,thisPlugin:f});at(u,"top"),O(this,B,!1,"f")},"G");const te=h(({frame:t,idx:e,series:i,scale:n,distinctDistance:a})=>{const s=R(t,i.x[e],n.id);for(let o=1;o<100;o++){const l=i.x[e-o];if(l!==void 0&&Math.abs(R(t,l,n.id)-s)<=a)return!1;const c=i.x[e+o];if(c!==void 0&&Math.abs(R(t,c,n.id)-s)<=a)return!1}return!0},"Kt"),ve=h(({style:t,showDistinct:e=te,radius:i=3,distinctDistance:n=50,gapDistance:a=1/0}={})=>(s,o,l,c)=>{const r=s.ctx,d=Math.min(o.x.length,o.y.length),u=S(s,o.x[0],l.id),f=S(s,o.y[0],c.id);r.save(),P(r,t);const x=new Path2D;x.rect(s.chartArea.x,s.chartArea.y,s.chartArea.width,s.chartArea.height),r.clip(x),r.beginPath(),r.moveTo(u,f);for(let v=1;v<d;v++){const k=o.x[v],g=o.y[v],p=S(s,k,l.id),m=S(s,g,c.id);o.x[v]-o.x[v-1]>a?r.moveTo(p,m):r.lineTo(p,m)}r.stroke(),r.restore(),r.save(),P(r,t),r.beginPath();for(let v=0;v<d;v++){if(!e({frame:s,idx:v,series:o,scale:l,distinctDistance:n}))continue;const k=o.x[v],g=o.y[v];if(k<s.limits[o.xScaleId].min||k>s.limits[o.xScaleId].max||g<s.limits[o.yScaleId].min||g>s.limits[o.yScaleId].max)continue;const p=S(s,k,l.id),m=S(s,g,c.id);r.moveTo(p+i,m),r.arc(p,m,i,0,2*Math.PI)}r.fill(),r.stroke(),r.restore()},"de"),pe=h(({style:t,radius:e=3}={})=>(i,n,a,s)=>{const o=i.ctx;o.save(),o.beginPath(),P(o,t);for(let l=0;l<n.x.length;l++){const c=n.x[l],r=n.y[l];if(c===void 0||r===void 0)continue;const d=S(i,c,a.id),u=S(i,r,s.id);o.moveTo(d+e,u),o.arc(d,u,e,0,2*Math.PI)}o.closePath(),o.stroke(),o.fill(),o.restore()},"ue"),ee=h(t=>{const e=Math.floor(t*255);return[e,e,e,255]},"Jt"),ge=h(({z:t,tileX:e,tileY:i,colorSpace:n})=>(a,s,o,l)=>{var c;const r=Math.max(...t),d=Math.min(...t),u=t.map(v=>(v-d)/(r-d)),f=Math.floor(R(a,e,o.id))+1,x=Math.floor(R(a,i,l.id))+1;for(let v=0;v<s.x.length;v++){const k=s.x[v],g=s.y[v],p=u[v];if(k===void 0||g===void 0||p===void 0)continue;const m=a.ctx.createImageData(f,x);for(let y=0;y<m.data.length;y+=4){const[w,T,M,L]=(c=n==null?void 0:n(p))!==null&&c!==void 0?c:ee(p);m.data[y]=w,m.data[y+1]=T,m.data[y+2]=M,m.data[y+3]=L}a.ctx.putImageData(m,Math.round(S(a,k,o.id)),Math.round(S(a,g,l.id)-x))}},"ve"),ie=1,Dt=1e3*ie,It=60*Dt,Et=60*It,ct=24*Et,ne=30*ct,se=365*ct,ae=[[1,"milliseconds"],[2,"milliseconds"],[5,"milliseconds"],[10,"milliseconds"],[20,"milliseconds"],[50,"milliseconds"],[100,"milliseconds"],[200,"milliseconds"],[500,"milliseconds"],[1,"seconds"],[5,"seconds"],[10,"seconds"],[15,"seconds"],[30,"seconds"],[1,"minutes"],[5,"minutes"],[10,"minutes"],[15,"minutes"],[30,"minutes"],[1,"hours"],[2,"hours"],[3,"hours"],[4,"hours"],[6,"hours"],[8,"hours"],[12,"hours"],[1,"days"],[3,"days"],[5,"days"],[7,"days"],[10,"days"],[15,"days"],[1,"months"],[2,"months"],[3,"months"],[4,"months"],[6,"months"],[1,"years"],[2,"years"],[5,"years"],[10,"years"],[25,"years"],[50,"years"],[100,"years"]],q=h(t=>{const[e,i]=t;switch(i){case"milliseconds":return e;case"seconds":return e*Dt;case"minutes":return e*It;case"hours":return e*Et;case"days":return e*ct;case"months":return e*ne;case"years":return e*se}},"J"),oe=h((t,e)=>{const i=new Date(t);return i.setUTCMilliseconds(i.getUTCMilliseconds()+e),i.getTime()},"ne"),re=h((t,e)=>{const i=new Date(t);return i.setUTCSeconds(i.getUTCSeconds()+e),i.getTime()},"ie"),le=h((t,e)=>{const i=new Date(t);return i.setUTCMinutes(i.getUTCMinutes()+e),i.getTime()},"oe"),ce=h((t,e)=>{const i=new Date(t);return i.setUTCHours(i.getUTCHours()+e),i.getTime()},"se"),de=h((t,e)=>{const i=new Date(t);return i.setUTCDate(i.getUTCDate()+e),i.getTime()},"ae"),yt=h((t,e)=>{const i=new Date(t);return i.setUTCMonth(i.getUTCMonth()+e),i.getTime()},"pt"),E=h((t,e)=>{const[i,n]=e;switch(n){case"milliseconds":return oe(t,i);case"seconds":return re(t,i);case"minutes":return le(t,i);case"hours":return ce(t,i);case"days":return de(t,i);case"months":return yt(t,i);case"years":return yt(t,i*12)}},"E");function Q(t,e){const i=new Date(t),n=new Date(i.toLocaleString("en-US",{timeZone:e})),a=new Date(i.toLocaleString("en-US",{timeZone:"UTC"}));return(n.getTime()-a.getTime())/(60*60*1e3)}h(Q,"q");const he=h((t,e,i="UTC")=>{const[n,a]=e;let s=new Date(t);const o=h(()=>{s.setUTCHours(-Q(s,i),0,0,0)},"a");switch(a){case"milliseconds":s.setUTCMilliseconds(Math.ceil(s.getUTCMilliseconds()/n)*n);break;case"seconds":s.setUTCSeconds(Math.ceil(s.getUTCSeconds()/n)*n,0);break;case"minutes":s.setUTCMinutes(Math.ceil(s.getUTCMinutes()/n)*n,0,0);break;case"hours":s.setUTCHours(Math.ceil(s.getUTCHours()/n)*n,0,0,0);break;case"days":case"months":case"years":a==="months"?s.setUTCDate(1):a==="years"&&s.setUTCMonth(0,1),o(),s.getTime()<t&&(s=new Date(E(s,[1,a])));break}return s.getTime()},"le"),ye=h(({timeZone:t=Tt,space:e=kt})=>({frame:i,scale:n})=>{var a;const s=i.limits[n.id],o=Math.floor(i.chartArea.width/e)+1,l=(s.max-s.min)/o,[c,r]=(a=ae.find(v=>q(v)>=l))!==null&&a!==void 0?a:[1,"milliseconds"],d=he(s.min,[c,r],t),u=Q(d,t),f=[d];let x;for(;;){switch(r){case"milliseconds":case"seconds":case"minutes":case"hours":{x=E(d,[f.length*c,r]);break}case"days":{const v=E(d,[f.length*c,r]);x=E(v,[u-Q(v,t),"hours"])}case"months":case"years":{const v=E(E(E(d,[u,"hours"]),[f.length*c,r]),[-u,"hours"]);x=E(v,[u-Q(v,t),"hours"]);break}}if(x>s.max)break;f.push(x)}return f},"fe"),I=h((t,e,i)=>{var n,a;return((n=t.find(s=>s.type===i))===null||n===void 0?void 0:n.value)!==((a=e.find(s=>s.type===i))===null||a===void 0?void 0:a.value)},"U"),xe=h(({timeZone:t=Tt,locale:e=Rt,showTimezone:i=!0})=>{const n=new Intl.DateTimeFormat(e,{year:"numeric",day:"numeric",month:"short",hour:"numeric",hourCycle:"h23",minute:"numeric",second:"numeric",fractionalSecondDigits:3,timeZoneName:"short",timeZone:t});return({ticks:a})=>{const s=a[1]-a[0],o=s<q([1,"days"]),l=s<q([1,"minutes"]),c=s<q([1,"seconds"]);return a.map(r=>n.formatToParts(new Date(r))).map((r,d,u)=>{var f,x,v,k,g,p,m,y;const w=u[d-1],T=d===0||I(r,w,"year"),M=d===0||I(r,w,"day"),L=d===0||I(r,w,"month"),z=d===0||I(r,w,"hour"),N=d===0||I(r,w,"timeZoneName"),it=d===0||I(r,w,"minute"),nt=d===0||I(r,w,"second"),Ut=d===0||I(r,w,"fractionalSecond"),J=[];if(o&&(z||it||N||nt||Ut)){const A=(f=r.find(W=>W.type==="hour"))===null||f===void 0?void 0:f.value,Ft=(x=r.find(W=>W.type==="minute"))===null||x===void 0?void 0:x.value,Lt=(v=r.find(W=>W.type==="timeZoneName"))===null||v===void 0?void 0:v.value;let dt="";if(l){const W=(k=r.find(st=>st.type==="second"))===null||k===void 0?void 0:k.value,zt=(g=r.find(st=>st.type==="fractionalSecond"))===null||g===void 0?void 0:g.value;dt=`:${W}`+(c?`.${zt}`:"")}J.push(`${A}:${Ft}${dt}`+(i&&N?` ${Lt}`:""))}return(M||L)&&J.push([(p=r.find(A=>A.type==="month"))===null||p===void 0?void 0:p.value,M&&((m=r.find(A=>A.type==="day"))===null||m===void 0?void 0:m.value)].filter(Boolean).join(" ")),T&&J.push((y=r.find(A=>A.type==="year"))===null||y===void 0?void 0:y.value),J.filter(A=>A).join(`
`)})}},"me"),_=h((t,e,i=!1)=>{const n=e.ctx.canvas.getBoundingClientRect(),a={x:t.clientX,y:t.clientY},s={x:t.clientX-n.left,y:t.clientY-n.top},o=t.clientX-n.left-e.chartArea.x,l=t.clientY-n.top-e.chartArea.y,c=tt(o,0,e.chartArea.width),r=tt(l,0,e.chartArea.height);if(!i&&(c!==o||r!==l))return;const d={};for(const u of e.inputParams.scales)u.id.startsWith("x-")?d[u.id]=ot(e,c,u.id):d[u.id]=ot(e,r,u.id);return{screen:a,canvas:s,scaled:d}},"W"),xt=h((t,e,i)=>{if(!e||!i)return!1;const n=Math.abs(i.screen.x-e.screen.x),a=Math.abs(i.screen.y-e.screen.y);return n>t||a>t},"bt"),be=h((t={})=>{var e;let i;return Object.assign(Object.assign({},t.pluginOpts),{initState:()=>{var n,a,s;return Object.assign({},(s=(a=(n=t.pluginOpts)===null||n===void 0?void 0:n.initState)===null||a===void 0?void 0:a.call(n))!==null&&s!==void 0?s:{})},transformFrame:n=>{var a,s,o,l;const{spanStart:c,spanEnd:r}=n.thisPlugin.state,d=(a=n.frame.inputParams.facets)!==null&&a!==void 0?a:[];c&&r&&d.push({type:"custom",layer:"top",draw:({ctx:f})=>{f.fillStyle="rgba(0,0,0,0.1)",f.fillRect(c.canvas.x,c.canvas.y,r.canvas.x-c.canvas.x,r.canvas.y-c.canvas.y)}});const u=Object.assign(Object.assign({},n.frame),{inputParams:Object.assign(Object.assign({},n.frame.inputParams),{facets:d})});return(l=(o=(s=t.pluginOpts)===null||s===void 0?void 0:s.transformFrame)===null||o===void 0?void 0:o.call(s,Object.assign(Object.assign({},n),{frame:u})))!==null&&l!==void 0?l:u},hooks:Object.assign(Object.assign({},(e=t.pluginOpts)===null||e===void 0?void 0:e.hooks),{onInit(n){var a,s,o;const{plot:l,thisPlugin:c}=n,r=l.getCanvas(),d=h(p=>{if(!t.onSpanSelect)return;const m=l.getFrame(),y=_(p,m);if(!y)return;const w=y;c.setState(T=>Object.assign(Object.assign({},T),{spanStart:y,spanEnd:w})),t.onSpanSelect({phase:"start",plot:l,frame:m,spanStart:y,spanEnd:w,thisPlugin:c})},"m");r.addEventListener("mousedown",d);const u=h(p=>{var m,y,w,T;if(!t.onHover&&!t.onSpanSelect)return;const M=l.getFrame(),L=_(p,M);(m=t.onHover)===null||m===void 0||m.call(t,{plot:l,frame:M,position:L,thisPlugin:c});const z=c.state.spanStart,N=_(p,M,!0);if(!z||!N)return;c.setState(nt=>Object.assign(Object.assign({},nt),{spanEnd:N}));const it=(w=(y=t.spanSelectOptions)===null||y===void 0?void 0:y.threshold)!==null&&w!==void 0?w:50;!xt(it,z,N)||(T=t.onSpanSelect)===null||T===void 0||T.call(t,{phase:"move",plot:l,frame:M,thisPlugin:c,spanStart:z,spanEnd:N})},"h");r.addEventListener("mousemove",u);const f=h(p=>{var m,y;if(!t.onSpanSelect)return;const w=l.getFrame(),{spanStart:T}=c.state;if(!T)return;const M=_(p,w,!0);if(!M)return;c.setState(z=>Object.assign(Object.assign({},z),{spanStart:void 0,spanEnd:void 0}));const L=(y=(m=t.spanSelectOptions)===null||m===void 0?void 0:m.threshold)!==null&&y!==void 0?y:50;!xt(L,T,M)||t.onSpanSelect({phase:"end",plot:l,thisPlugin:c,frame:w,spanStart:T,spanEnd:M})},"u");document.addEventListener("mouseup",f);const x=h(()=>{if(!t.onHover)return;const p=l.getFrame();t.onHover({plot:l,frame:p,thisPlugin:c})},"v");r.addEventListener("mouseleave",x);const v=h(p=>{if(i){clearTimeout(i),i=void 0;return}p.detail>1||(i=window.setTimeout(()=>{if(i=void 0,!t.onClick)return;const m=l.getFrame(),y=_(p,m);!y||t.onClick({plot:l,frame:m,position:y,thisPlugin:c})},200))},"y");r.addEventListener("click",v);const k=h(p=>{if(!t.onDblClick)return;const m=l.getFrame(),y=_(p,m);!y||t.onDblClick({plot:l,frame:m,position:y,thisPlugin:c})},"g");r.addEventListener("dblclick",k);const g=(o=(s=(a=t.pluginOpts)===null||a===void 0?void 0:a.hooks)===null||s===void 0?void 0:s.onInit)===null||o===void 0?void 0:o.call(s,n);return()=>{const p=l.getCanvas();p.removeEventListener("mousemove",u),p.removeEventListener("mouseleave",x),p.removeEventListener("click",v),p.removeEventListener("dblclick",k),p.removeEventListener("mousedown",d),document.removeEventListener("mouseup",f),g==null||g()}}})})},"ge"),we=h((t,e,i)=>{const[n]=K.exports.useState(()=>new At(t,e())),a=K.exports.useRef(null),s=t.canvasRef||a;return K.exports.useLayoutEffect(()=>{n.getPhase()==="not-attached"?s.current?n.attach(s.current):console.error("No canvas element provided"):n.update(e())},i),K.exports.useLayoutEffect(()=>()=>{n.destroy()},[]),[s,n]},"v");export{ge as a,me as c,ve as d,ye as f,be as g,xe as m,pe as u,we as v};
//# sourceMappingURL=main.es.62385bb5.js.map
