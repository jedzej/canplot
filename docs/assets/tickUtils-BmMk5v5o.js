import{p as B}from"./CanPlot-d0tERzCM.js";const _=60,R=30,F="UTC",j="en-GB",ne=({space:s,formatter:t}={})=>(e,a)=>{const{min:c,max:n}=e,m=[],M=window.devicePixelRatio||1,w=(s??(e.origin==="x"?_:R))*M,o=B(a,w,e.id),i=D.find(l=>l>o)??1;let f=c%i<Number.EPSILON?c:c+i-c%i;for(;f<=n;)m.push(f),f+=i;return(t??x)(m)},x=s=>{const t=Math.max(0,Math.ceil(-Math.log10(s[1]-s[0])));return s.map(e=>({value:e,label:e.toFixed(t)}))},D=[];for(let s=-12;s<=12;s++)D.push(1*10**s),D.push(2*10**s),D.push(5*10**s);const X=1,I=1e3*X,A=60*I,v=60*A,E=24*v,Y=30*E,Z=365*E,G=[[1,"milliseconds"],[2,"milliseconds"],[5,"milliseconds"],[10,"milliseconds"],[20,"milliseconds"],[50,"milliseconds"],[100,"milliseconds"],[200,"milliseconds"],[500,"milliseconds"],[1,"seconds"],[5,"seconds"],[10,"seconds"],[15,"seconds"],[30,"seconds"],[1,"minutes"],[5,"minutes"],[10,"minutes"],[15,"minutes"],[30,"minutes"],[1,"hours"],[2,"hours"],[3,"hours"],[4,"hours"],[6,"hours"],[8,"hours"],[12,"hours"],[1,"days"],[3,"days"],[5,"days"],[7,"days"],[10,"days"],[15,"days"],[1,"months"],[2,"months"],[3,"months"],[4,"months"],[6,"months"],[1,"years"],[2,"years"],[5,"years"],[10,"years"],[25,"years"],[50,"years"],[100,"years"]],S=s=>{const[t,e]=s;switch(e){case"milliseconds":return t;case"seconds":return t*I;case"minutes":return t*A;case"hours":return t*v;case"days":return t*E;case"months":return t*Y;case"years":return t*Z}},K=(s,t)=>{const e=new Date(s);return e.setUTCMilliseconds(e.getUTCMilliseconds()+t),e.getTime()},q=(s,t)=>{const e=new Date(s);return e.setUTCSeconds(e.getUTCSeconds()+t),e.getTime()},J=(s,t)=>{const e=new Date(s);return e.setUTCMinutes(e.getUTCMinutes()+t),e.getTime()},Q=(s,t)=>{const e=new Date(s);return e.setUTCHours(e.getUTCHours()+t),e.getTime()},W=(s,t)=>{const e=new Date(s);return e.setUTCDate(e.getUTCDate()+t),e.getTime()},P=(s,t)=>{const e=new Date(s);return e.setUTCMonth(e.getUTCMonth()+t),e.getTime()},y=(s,t)=>{const[e,a]=t;switch(a){case"milliseconds":return K(s,e);case"seconds":return q(s,e);case"minutes":return J(s,e);case"hours":return Q(s,e);case"days":return W(s,e);case"months":return P(s,e);case"years":return P(s,e*12)}};function k(s,t){const e=new Date(s),a=new Date(e.toLocaleString("en-US",{timeZone:t})),c=new Date(e.toLocaleString("en-US",{timeZone:"UTC"}));return(a.getTime()-c.getTime())/(3600*1e3)}const ee=(s,t,e="UTC")=>{const[a,c]=t;let n=new Date(s);const m=()=>{n.setUTCHours(-k(n,e),0,0,0)};switch(c){case"milliseconds":n.setUTCMilliseconds(Math.ceil(n.getUTCMilliseconds()/a)*a);break;case"seconds":n.setUTCSeconds(Math.ceil(n.getUTCSeconds()/a)*a,0);break;case"minutes":n.setUTCMinutes(Math.ceil(n.getTime()%v/A/a)*a,0,0);break;case"hours":n.setUTCHours(Math.ceil(n.getTime()%E/v/a)*a,0,0,0);break;case"days":case"months":case"years":c==="months"?n.setUTCDate(1):c==="years"&&n.setUTCMonth(0,1),m(),n.getTime()<s&&(n=new Date(y(n,[1,c])));break}return n.getTime()},oe=({timeZone:s=F,space:t=_,formatter:e,locale:a,showTimezone:c}={})=>(n,m)=>{const{min:M,max:w}=n,o=Math.floor(m.chartAreaCanvasPX.width/t)+1,f=(w-M)/o,[l,C]=G.find(r=>S(r)>=f)??[1,"milliseconds"],d=ee(M,[l,C],s),g=k(d,s),U=[d];let T;for(;;){switch(C){case"milliseconds":case"seconds":case"minutes":case"hours":{T=y(d,[U.length*l,C]);break}case"days":{const r=y(d,[U.length*l,C]);T=y(r,[g-k(r,s),"hours"]);break}case"months":case"years":{const r=y(y(y(d,[g,"hours"]),[U.length*l,C]),[-g,"hours"]);T=y(r,[g-k(r,s),"hours"]);break}}if(T>w)break;U.push(T)}return(e??se({locale:a,showTimezone:c,timeZone:s}))(U)},h=(s,t,e)=>s.find(a=>a.type===e)?.value!==t.find(a=>a.type===e)?.value,se=({timeZone:s=F,locale:t=j,showTimezone:e=!0})=>{const a=new Intl.DateTimeFormat(t,{year:"numeric",day:"numeric",month:"short",hour:"numeric",hourCycle:"h23",minute:"numeric",second:"numeric",fractionalSecondDigits:3,timeZoneName:"short",timeZone:s});return c=>{const n=c[1]-c[0],m=n<S([1,"days"]),M=n<S([1,"minutes"]),w=n<S([1,"seconds"]);return c.map(o=>({value:o,label:a.formatToParts(new Date(o))})).map((o,i,f)=>{const l=f[i-1],C=i===0||h(o.label,l.label,"year"),d=i===0||h(o.label,l.label,"day"),g=i===0||h(o.label,l.label,"month"),U=i===0||h(o.label,l.label,"hour"),T=i===0||h(o.label,l.label,"timeZoneName"),r=i===0||h(o.label,l.label,"minute"),H=i===0||h(o.label,l.label,"second"),$=i===0||h(o.label,l.label,"fractionalSecond"),p=[];if(m&&(U||r||T||H||$)){const u=o.label.find(b=>b.type==="hour")?.value,O=o.label.find(b=>b.type==="minute")?.value,V=o.label.find(b=>b.type==="timeZoneName")?.value;let N="";if(M){const b=o.label.find(L=>L.type==="second")?.value,z=o.label.find(L=>L.type==="fractionalSecond")?.value;N=`:${b}`+(w?`.${z}`:"")}p.push(`${u}:${O}${N}`+(e&&T?` ${V}`:""))}return(d||g)&&p.push([o.label.find(u=>u.type==="month")?.value,d&&o.label.find(u=>u.type==="day")?.value].filter(Boolean).join(" ")),C&&p.push(o.label.find(u=>u.type==="year")?.value),{value:o.value,label:p.filter(u=>u).join(`
`)}})}};export{oe as a,ne as m};
