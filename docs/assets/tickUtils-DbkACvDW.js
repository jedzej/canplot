import{R as H}from"./iframe-BgZoRfvH.js";import{d as I,u as $,c as P,p as V}from"./frameContext-Co5DpICG.js";const G=({layer:s="BOTTOM",scaleId:n,tickStyle:e,labelStyle:a,labelGap:r,tickSize:i,ticks:d})=>($(s,({ctx:o,valToPos:b,getScale:c,frame:T})=>{const u=c(n);if(!u||!u.axis||u.origin!=="x")return;const t=u.axis,l=t.position==="top"?t.canvasRect.y+t.canvasRect.height:t.canvasRect.y,m=window.devicePixelRatio||1,v=l,p=(i??6)*m,y=t.position==="top"?l-p:l+p,f=(r??12)*m;o.save(),o.fontKerning="auto",P(o,{...e}),o.beginPath();const w=Array.isArray(d)?d:d({...u,axis:t},T);for(const{value:C}of w){const g=b(C,n,"canvas");g!==null&&(o.moveTo(g,v),o.lineTo(g,y))}o.stroke(),o.restore(),o.save(),P(o,{textBaseline:t.position==="top"?"bottom":"top",textAlign:"center",...e,...a,font:z(a?.font??e?.font)});for(const{value:C,label:g}of w){const h=b(C,n,"canvas");if(h===null)continue;const U=g.split(`
`);for(let E=0;E<U.length;E++)o.fillText(U[E],h,y+m*2+E*f)}o.restore()},[d,n,e,a]),null),me=H.memo(G,I),K=({layer:s="BOTTOM",scaleId:n,tickStyle:e,labelStyle:a,labelGap:r,tickSize:i,ticks:d})=>($(s,({ctx:o,valToPos:b,getScale:c,frame:T})=>{const u=c(n);if(!u||!u.axis||u.origin!=="y")return;const t=u.axis,l=t.position==="left"?t.canvasRect.x+t.canvasRect.width:t.canvasRect.x,m=l,v=i??6,p=t.position==="left"?l-v:l+v,y=r??12,f=Array.isArray(d)?d:d({...u,axis:t},T);o.save(),o.fontKerning="auto",P(o,{...e}),o.beginPath();for(const{value:w}of f){const C=b(w,n,"canvas");C!==null&&(o.moveTo(m,C),o.lineTo(p,C))}o.stroke(),o.restore(),o.save(),P(o,{textBaseline:"middle",textAlign:t.position==="left"?"right":"left",...e,...a,font:z(a?.font??e?.font)});for(const{value:w,label:C}of f){const g=b(w,n,"canvas");if(g===null)continue;const h=C.split(`
`);for(let U=0;U<h.length;U++)o.fillText(` ${h[U]} `,p,g+U*y)}o.restore()},[d,n,e,a]),null),de=H.memo(K,I),z=s=>{if(s)try{return s.replace(/(\d+)px/,(n,e)=>`${parseInt(e)*window.devicePixelRatio||1}px`)}catch{}return s},X=60,Z=30,Y="UTC",q="en-GB",Te=({space:s,formatter:n,acceptableIncrements:e}={})=>(a,r)=>{const{min:i,max:d}=a,o=[],b=window.devicePixelRatio||1,c=(s??(a.origin==="x"?X:Z))*b,T=V(r,c,a.id);if(T===null)return[];const u=e??S,t=u.find(m=>m>T)??u.at(-1)??1;let l=i;if(Math.abs(l%t)>Number.EPSILON){const m=(t-l%t)%t;l+=m}for(;l<=d&&o.length<1e3;)o.push(l),l+=t;return(n??J)(o)},J=s=>{const n=Math.max(0,Math.ceil(-Math.log10(s[1]-s[0])));return s.map(e=>({value:e,label:e.toFixed(n)}))},S=[];for(let s=-12;s<=12;s++)S.push(1*10**s),S.push(2*10**s),S.push(5*10**s);const Q=1,j=1e3*Q,F=60*j,N=60*F,R=24*N,W=30*R,ee=365*R,se=[[1,"milliseconds"],[2,"milliseconds"],[5,"milliseconds"],[10,"milliseconds"],[20,"milliseconds"],[50,"milliseconds"],[100,"milliseconds"],[200,"milliseconds"],[500,"milliseconds"],[1,"seconds"],[5,"seconds"],[10,"seconds"],[15,"seconds"],[30,"seconds"],[1,"minutes"],[5,"minutes"],[10,"minutes"],[15,"minutes"],[30,"minutes"],[1,"hours"],[2,"hours"],[3,"hours"],[4,"hours"],[6,"hours"],[8,"hours"],[12,"hours"],[1,"days"],[3,"days"],[5,"days"],[7,"days"],[10,"days"],[15,"days"],[1,"months"],[2,"months"],[3,"months"],[4,"months"],[6,"months"],[1,"years"],[2,"years"],[5,"years"],[10,"years"],[25,"years"],[50,"years"],[100,"years"]],k=s=>{const[n,e]=s;switch(e){case"milliseconds":return n;case"seconds":return n*j;case"minutes":return n*F;case"hours":return n*N;case"days":return n*R;case"months":return n*W;case"years":return n*ee}},ne=(s,n)=>{const e=new Date(s);return e.setUTCMilliseconds(e.getUTCMilliseconds()+n),e.getTime()},te=(s,n)=>{const e=new Date(s);return e.setUTCSeconds(e.getUTCSeconds()+n),e.getTime()},oe=(s,n)=>{const e=new Date(s);return e.setUTCMinutes(e.getUTCMinutes()+n),e.getTime()},ae=(s,n)=>{const e=new Date(s);return e.setUTCHours(e.getUTCHours()+n),e.getTime()},ie=(s,n)=>{const e=new Date(s);return e.setUTCDate(e.getUTCDate()+n),e.getTime()},B=(s,n)=>{const e=new Date(s);return e.setUTCMonth(e.getUTCMonth()+n),e.getTime()},D=(s,n)=>{const[e,a]=n;switch(a){case"milliseconds":return ne(s,e);case"seconds":return te(s,e);case"minutes":return oe(s,e);case"hours":return ae(s,e);case"days":return ie(s,e);case"months":return B(s,e);case"years":return B(s,e*12)}};function L(s,n){const e=new Date(s),a=new Date(e.toLocaleString("en-US",{timeZone:n})),r=new Date(e.toLocaleString("en-US",{timeZone:"UTC"}));return(a.getTime()-r.getTime())/(3600*1e3)}const ce=(s,n,e="UTC")=>{const[a,r]=n;let i=new Date(s);const d=()=>{i.setUTCHours(-L(i,e),0,0,0)};switch(r){case"milliseconds":i.setUTCMilliseconds(Math.ceil(i.getUTCMilliseconds()/a)*a);break;case"seconds":i.setUTCSeconds(Math.ceil(i.getUTCSeconds()/a)*a,0);break;case"minutes":i.setUTCMinutes(Math.ceil(i.getTime()%N/F/a)*a,0,0);break;case"hours":i.setUTCHours(Math.ceil(i.getTime()%R/N/a)*a,0,0,0);break;case"days":case"months":case"years":r==="months"?i.setUTCDate(1):r==="years"&&i.setUTCMonth(0,1),d(),i.getTime()<s&&(i=new Date(D(i,[1,r])));break}return i.getTime()},he=({timeZone:s=Y,space:n=X,formatter:e,locale:a,showTimezone:r}={})=>(i,d)=>{const{min:o,max:b}=i,c=Math.floor(d.chartAreaCanvasPX.width/n)+1,u=(b-o)/c,[t,l]=se.find(f=>k(f)>=u)??[1,"milliseconds"],m=ce(o,[t,l],s),v=L(m,s),p=[m];let y;for(;;){switch(l){case"milliseconds":case"seconds":case"minutes":case"hours":{y=D(m,[p.length*t,l]);break}case"days":{const f=D(m,[p.length*t,l]);y=D(f,[v-L(f,s),"hours"]);break}case"months":case"years":{const f=D(D(D(m,[v,"hours"]),[p.length*t,l]),[-v,"hours"]);y=D(f,[v-L(f,s),"hours"]);break}}if(y>b)break;p.push(y)}return(e??le({locale:a,showTimezone:r,timeZone:s}))(p)},M=(s,n,e)=>s.find(a=>a.type===e)?.value!==n.find(a=>a.type===e)?.value,le=({timeZone:s=Y,locale:n=q,showTimezone:e=!0})=>{const a=new Intl.DateTimeFormat(n,{year:"numeric",day:"numeric",month:"short",hour:"numeric",hourCycle:"h23",minute:"numeric",second:"numeric",fractionalSecondDigits:3,timeZoneName:"short",timeZone:s});return r=>{const i=r[1]-r[0],d=i<k([1,"days"]),o=i<k([1,"minutes"]),b=i<k([1,"seconds"]);return r.map(c=>({value:c,label:a.formatToParts(new Date(c))})).map((c,T,u)=>{const t=u[T-1],l=T===0||M(c.label,t.label,"year"),m=T===0||M(c.label,t.label,"day"),v=T===0||M(c.label,t.label,"month"),p=T===0||M(c.label,t.label,"hour"),y=T===0||M(c.label,t.label,"timeZoneName"),f=T===0||M(c.label,t.label,"minute"),w=T===0||M(c.label,t.label,"second"),C=T===0||M(c.label,t.label,"fractionalSecond"),g=[];if(d&&(p||f||y||w||C)){const h=c.label.find(A=>A.type==="hour")?.value,U=c.label.find(A=>A.type==="minute")?.value,E=c.label.find(A=>A.type==="timeZoneName")?.value;let O="";if(o){const A=c.label.find(_=>_.type==="second")?.value,x=c.label.find(_=>_.type==="fractionalSecond")?.value;O=`:${A}`+(b?`.${x}`:"")}g.push(`${h}:${U}${O}`+(e&&y?` ${E}`:""))}return(m||v)&&g.push([c.label.find(h=>h.type==="month")?.value,m&&c.label.find(h=>h.type==="day")?.value].filter(Boolean).join(" ")),l&&g.push(c.label.find(h=>h.type==="year")?.value),{value:c.value,label:g.filter(h=>h).join(`
`)}})}};export{me as X,de as Y,he as a,Te as m};
